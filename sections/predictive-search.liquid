{%- liquid
    assign articleImage = article.image
    assign ratio = 0.75
    assign default = 'grande'
    assign sizes = '100vw'
-%}
{%- if predictive_search.performed -%}
  <div id="predictive-search-results">
    {%- if predictive_search.resources.products.size > 0 -%}
      <h2 id="predictive-search-products">Products</h2>
      <ul class="predictive-search__results--list" data-type-products>
        {%- for product in predictive_search.resources.products -%}
          <li>
            <a href="{{ product.url }}" title="{{ product.title }}">
              <img class="predictive-search__image" src="{{ product.featured_image | product_img_url: "100x" }}" width="" height="" loading="lazy" />
              <div class="predictive-search__item--content"></div>
            </a>
          </li>
        {%- endfor -%}
      </ul>
    {% endif %}
  
    {%- if predictive_search.resources.collections.size > 0 -%}
      <div data-type-collections>
        <h2 id="predictive-search-collections">Collections</h2>
        <ul class="no-bullets">
          {% for collection in predictive_search.resources.collections %}
            <li>
              <a href="{{ collection.url }}">
                {{ collection.title }}
              </a>
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  
    {%- if predictive_search.resources.pages.size > 0 -%}
      <div data-type-pages>
        <h2 id="predictive-search-pages">Pages</h2>
        <ul class="no-bullets">
          {%- for page in predictive_search.resources.pages -%}
            <li>
              <a href="{{ page.url }}">
                {{ page.title }}
              </a>
            </li>
          {%- endfor -%}
        </ul>
      </div>
    {% endif %}
  
    {%- if predictive_search.resources.articles.size > 0 -%}
      <div data-type-articles="{{ predictive_search.resources.articles.size }}">
        <h2 id="predictive-search-articles">Articles</h2>
        {%- for article in predictive_search.resources.articles -%}
          <div class="grid__item grid-product small--one-half medium-up--one-quarter">
            <a href="{{ article.url }}" class="grid-product__link grid-product__link--inline">
              <div class="image-wrap">
                <div class="grid__image-ratio grid__image-ratio--square">
                   <img style="aspect-ratio: {{ imageAspectRatio }};"src="{{ articleImage | img_url: default }}"srcset="
                      {{ articleImage | img_url: 'medium' }} {% if ratio < 1 %}{{ 240 | times: ratio | round }}{% else %}240{% endif %}w,
                      {{ articleImage | img_url: 'large' }} {% if ratio < 1 %}{{ 480 | times: ratio | round }}{% else %}480{% endif %}w,
                      {{ articleImage | img_url: 'grande' }} {% if ratio < 1 %}{{ 600 | times: ratio | round }}{% else %}600{% endif %}w,
                      {{ articleImage | img_url: '1024x1024' }} {% if ratio < 1 %}{{ 1024 | times: ratio | round }}{% else %}1024{% endif %}w,
                      {{ articleImage | img_url: '2048x2048' }} {% if ratio < 1 %}{{ 2048 | times: ratio | round }}{% else %}2048{% endif %}w
                      "
                      width="{{ articleImage.width }}"
                      height="{{ articleImage.height }}"
                      loading="{{ lazyloading }}"
                      sizes="{{ sizes }}"
                      alt="{{ articleImage.alt }}"
                    >
                </div>
              </div>
              <div class="grid-product__meta">
                {{ article.title }}
              </div>
            </a>
          </div>
        {%- endfor -%}
      </div>
    {% endif %}
  </div>
{%- endif -%}
