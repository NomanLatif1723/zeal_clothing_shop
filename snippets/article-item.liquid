{%- liquid
    assign selectedImageSize = image-size
    assign imageAspectRatio = "0"
    case selectedImageSize
    when 'natural'
    assign imageAspectRatio = "0"
    when 'square'
    assign imageAspectRatio = "1/1"
    when 'portrait'
    assign imageAspectRatio = "2/3"
    when 'landscape'
    assign imageAspectRatio = "4/3"
    when 'wide'
    assign imageAspectRatio = "16/9"
    endcase

    assign articleImage = article.image
    assign ratio = 0.75
    assign default = 'grande'
    assign sizes = '100vw'
-%}

<div class="grid__item grid__item-one-third">
  <div class="grid article__grid ">
    <div class="grid__item grid__item-small">
      {%- if article.image -%}
        <div class="grid__item-image">
          <a
            href="{{ article.url }}"
            title="{{ article.title }}"
            aria-label="{{ article.title | escape }}"
            class="article__image">
            <div class="article_image-wrapper">

              <img style="aspect-ratio: {{ imageAspectRatio }};"src="{{ articleImage | img_url: default }}"srcset="
                  {{ articleImage | product_img_url: 'medium' }} {% if ratio < 1 %}{{ 240 | times: ratio | round }}{% else %}240{% endif %}w,
                  {{ articleImage | product_img_url: 'large' }} {% if ratio < 1 %}{{ 480 | times: ratio | round }}{% else %}480{% endif %}w,
                  {{ articleImage | product_img_url: 'grande' }} {% if ratio < 1 %}{{ 600 | times: ratio | round }}{% else %}600{% endif %}w,
                  {{ articleImage | product_img_url: '1024x1024' }} {% if ratio < 1 %}{{ 1024 | times: ratio | round }}{% else %}1024{% endif %}w,
                  {{ articleImage | product_img_url: '2048x2048' }} {% if ratio < 1 %}{{ 2048 | times: ratio | round }}{% else %}2048{% endif %}w
                  "
                  width="{{ articleImage.width }}"
                  height="{{ articleImage.height }}"
                  loading="{{ lazyloading }}"
                  sizes="{{ sizes }}"
                  alt="{{ articleImage.alt }}"
                >
            </div>
          </a>
        </div>
      {%- endif -%}

      <div class="grid__item-text">
        <div class="article__type-date">
          <h4>{{ article.tags[0] }}</h4>
          <span class="article__date">
            {%- if show_date -%}
              --
              {{ article.created_at | date: '%d %b %Y' }}{%- endif -%}
          </span>
        </div>
        <div class="main__heading article__title">
          <a href="{{ article.url }}" title="{{ article.title }}">
            <h3>{{ article.title }}</h3>
          </a>
        </div>
        <div class="article__content rte">
          {{ article.content | truncatewords: 15 | strip_html }}
        </div>
        {%- if show_tags -%}
          <ul class="tags__list">
            {%- for tag in article.tags limit: 3 -%}
              <li>{{ tag }}</li>
            {%- endfor -%}
          </ul>
        {%- endif -%}
        <div class="btn read__more-btn">
          <h4>Read More..</h4>
        </div>
      </div>
    </div>
  </div>
</div>