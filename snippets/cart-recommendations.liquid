{% comment %}
<cart-recommendations data-section-id="{{ section.id }}" data-product-id="{{ cart.items.first.product_id }}" data-limit="4">
  <div class="cart__recommendation-products">
    <div class="cart__recommendation-header">Consider These Items As Well</div>
    <div class="cart__recommendations-list">
      
    </div>
  </div>
</cart-recommendations>
{% endcomment %}
<cart-drawer-recommendations section-id="{{ section.id }}" product-id="{{ cart.items.first.product_id }}" class="mini-cart__recommendations">
{%- assign acceptable_recommendations_count = 0 -%}

{%- for product in recommendations.products -%}
  {%- assign matching_product = cart.items -%}

  {%- if matching_product == blank -%}
    {%- assign acceptable_recommendations_count = acceptable_recommendations_count | plus: 1 -%}
  {%- endif -%}
{%- endfor -%}

  {%- if acceptable_recommendations_count > 0 -%}
    <div class="mini-cart__recommendations-inner">
        <p class="mini-cart__recommendations-heading heading heading--small hidden-pocket">Consider These Items As Well</p>

      <div class="scroller">
        <div class="scroller__inner">
          <div class="mini-cart__recommendations-list">
            {%- assign shown_products_count = 0 -%}

            {%- for product in recommendations.products -%}
              {%- if shown_products_count >= 6 -%}
                {%- break -%}
              {%- endif -%}

              {%- assign matching_product = cart.items | where: 'product_id', product.id -%}

              {%- if matching_product.size == 0 -%}
                {%- assign shown_products_count = shown_products_count | plus: 1 -%}
                {%- render 'cart-recommended-item', product: product, -%}
              {%- endif -%}
            {%- endfor -%}
          </div>
        </div>
      </div>
    </div>
  {%- endif -%}
</cart-drawer-recommendations>