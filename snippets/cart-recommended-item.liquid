<div class="cart__recommendations-item">
  <div class="cart__recommendations-item--image">
    <img src="{{ product.featured_image | img_url: "100x" }}" width="100" height="100" loading="lazy"/>
  </div>
  <div class="cart__recommendations-item--content">
    <div class="cart__recommendations-item--title"><h3>{{ product.title }}</h3></div>
    <div class="grid-product__price">
      <span class="visually__hidden">{{ 'products.price.sale_price' | t }}</span>
      <span class="product__sale-price">{{ product.price | money_without_trailing_zeros }}</span>
      {%- if product.compare_at_price > product.price -%}
        <span class="visually__hidden">{{ 'products.price.regular_price' | t }}</span>
        <span class="product__compare-price">{{ product.compare_at_price | money_without_trailing_zeros }}</span>
      {%- endif -%}
      {%- if product.selected_or_first_available_variant.unit_price_measurement -%}
        <span data-unit-price class="product__unit-price">
          {%- if product.selected_or_first_available_variant.price > 0 -%}
            {%- if product.selected_or_first_available_variant.unit_price_measurement -%}
              <span>{{ product.selected_or_first_available_variant.unit_price | money }}/
                {%- if product.selected_or_first_available_variant.unit_price_measurement.reference_value != 1 -%}
                  {{ product.selected_or_first_available_variant.unit_price_measurement.reference_value }}
                {%- endif -%}
                  {{ product.selected_or_first_available_variant.unit_price_measurement.reference_unit }}
              </span>
            {%- endif -%}
            {%- else -%}
              {{ 'products.free_unit_price' | t }}
          {%- endif -%}
        </span>
      {%- endif -%}
    </div>
    <div class="cart__recommendations-item--variants">
      {%- unless product.has_only_default_variant -%}
        <variant-selects data-section="{{ section.id }}" data-url="{{ product.url }}">
          <div class="product__options product-select__options">
            {%- for option in product.options_with_values -%}
              <div class="product-form__select">
                <label class="product-form__label"><strong>{{ option.name }}</strong>(<span data-option-name>{{ option.selected_value }}</span>)</label>
                <select form="{{ product_form_id }}" class="product__select" data-selected-variant id="product-select-{{ forloop.index }}">
                  {% for value in option.values %}
                    <option value="{{ value }}" {% if option.selected_value == value %}selected{% endif %}>
                      {{ value }}
                    </option>
                  {% endfor %}
                </select>
              </div>
            {%- endfor -%}
          </div>
        </variant-selects>
      {%- endunless -%}
    </div>
    <div class="cart__recommendations-item--button">
      {%- liquid
         if template contains 'preorder'
           assign add_to_cart_text = 'products.preorder' | t
         else
           assign add_to_cart_text = 'products.add_to_cart' | t
         endif
      -%}
    <button data-add-to-cart type="submit" name="add" aria-label="Add to cart" form="{{ product_form_id }}"
      class="btn btn__link btn__primary"{% unless product.selected_or_first_available_variant.available %}disabled{% endunless %}>
      <span>  
        {% if product.selected_or_first_available_variant.available %}
          {{ add_to_cart_text }}
        {% else %}
          {{ 'products.sold_out' | t }}
        {% endif %}
      </span>
      <div class="loader__spinner hidden"></div>
    </button>
      <select name="id" class="selected-variant__id hidden">
        {%- for variant in product.variants -%}
          {%- if variant.available -%}
            <option {% if variant == product.selected_or_first_available_variant %}
              selected="selected"{% endif %}
              value="{{ variant.id }}">
              {{ variant.title }} - {{ variant.price | money_with_currency }}
            </option>
          {%- else -%}
            <option disabled="disabled">
              {{ variant.title }} - {{ 'products.badges.sold_out' | t }}
            </option>
          {%- endif -%}
        {%- endfor -%}
      </select>
    </div>
  </div>
</div>