{%- liquid
    assign selectedImageSize = settings.image_size
    assign imageAspectRatio = "0"
    case selectedImageSize
    when 'natural'
    assign imageAspectRatio = "0"
    when 'square'
    assign imageAspectRatio = "1/1"
    when 'portrait'
    assign imageAspectRatio = "2/3"
    when 'landscape'
    assign imageAspectRatio = "4/3"
    when 'wide'
    assign imageAspectRatio = "16/9"
    endcase
-%}
{%- case products_per_row -%}
  {%- when 1 -%}
  {%- assign itemWidth = '' -%}
  {%- when 2 -%}
  {%- assign itemWidth = 'block__item--half' -%}
  {%- when 3 -%}
  {%- assign itemWidth = 'block__item--auto block__item--one-third' -%}
  {%- when 4 -%}
  {%- assign itemWidth = 'block__item--auto block__item--one-fourth' -%}
  {%- when 5 -%}
  {%- assign itemWidth = 'block__item--auto block__item--one-fifth' -%}
{%- endcase -%}
<div class="featured-grid__item {{ itemWidth }} {% if stackProduct == false %}list-scroller__item{% endif %}"> 
  <div class="featured-grid__content">
    <div class="featured-grid__image">
      <div class="featured-product__image">
        {% assign image = product.featured_image %}
        {% assign ratio = 0.75 %}
        {% assign default = 'grande' %}
        {% assign sizes = '(min-width: 1360px) 650px, 45vw' %}
        
        <img class="" style="aspect-ratio: {{ imageAspectRatio }};"
          src="{{ image | product_img_url: default }}"
          srcset="
        		{{ image | product_img_url: 'pico' }} {% if ratio < 1 %}{{ 16 | times: ratio | round }}{% else %}16{% endif %}w,
        		{{ image | product_img_url: 'icon' }} {% if ratio < 1 %}{{ 32 | times: ratio | round }}{% else %}32{% endif %}w,
        		{{ image | product_img_url: 'thumb' }} {% if ratio < 1 %}{{ 50 | times: ratio | round }}{% else %}50{% endif %}w,
        		{{ image | product_img_url: 'small' }} {% if ratio < 1 %}{{ 100 | times: ratio | round }}{% else %}100{% endif %}w,
        		{{ image | product_img_url: 'compact' }} {% if ratio < 1 %}{{ 160 | times: ratio | round }}{% else %}160{% endif %}w,
        		{{ image | product_img_url: 'medium' }} {% if ratio < 1 %}{{ 240 | times: ratio | round }}{% else %}240{% endif %}w,
        		{{ image | product_img_url: 'large' }} {% if ratio < 1 %}{{ 480 | times: ratio | round }}{% else %}480{% endif %}w,
        		{{ image | product_img_url: 'grande' }} {% if ratio < 1 %}{{ 600 | times: ratio | round }}{% else %}600{% endif %}w,
        		{{ image | product_img_url: '1024x1024' }} {% if ratio < 1 %}{{ 1024 | times: ratio | round }}{% else %}1024{% endif %}w,
        		{{ image | product_img_url: '2048x2048' }} {% if ratio < 1 %}{{ 2048 | times: ratio | round }}{% else %}2048{% endif %}w
            "
          width="{{ image.width }}"
          height="{{ image.height }}"
          loading="lazy"
          sizes="{{ sizes }}"
          alt="{{ image.alt }}"
          /> 
      </div>
    </div>
    <div class="featured-grid__description text__align-{{ textAlignment }}">
      <div class="grid-product__title">
        <h4>{{ product.title }}</h4>
      </div>
      <div class="grid-product__price">{{ product.price | money }}</div>
    </div>
  </div>
</div>