{%- liquid
   assign promo_collection = collections[block.settings.promo_collection]
   assign collection_heading = block.settings.collection_heading
   assign collection_text = block.settings.collection_text
   assign collection_button_label = block.settings.collection_button_label
   assign collection_button_link = block.settings.collection_button_link
   assign show_collection_timer = block.settings.show_collection_timer
   assign year = block.settings.years
   assign month = block.settings.months
   assign day = block.settings.days
   assign hour = block.settings.hours
   assign minute = block.settings.minutes
   assign collection_image_1  = promo_collection.products[0].featured_media.preview_image
   assign collection_image_2  = promo_collection.products[1].featured_media.preview_image

   assign ratio = 0.75
   assign default = 'large'
   assign sizes = '(min-width: 1200px) 650px, 45vw'
-%}
<div class="promotional-grid__container promo-collection__wrapper{% if collectionBackgroundColor contains '#f' %} text__dark{% else %} text__light{% endif %}"
  data-year="{{ year }}" data-month="{{ month }}" data-day="{{ day }}" data-hour="{{ hour }}" data-minute="{{ minute }}" data-countdown>
  <div class="page__width">
    <div class="promo__flex promo-collection__flex">
      <div class="promo-collection__text">
        {%- if collection_heading != blank -%}
          <div class="main__heading promo-collection__heading">
            <h2>{{ collection_heading }}</h2>
          </div>
        {%- endif -%}
        {% comment %}
        {%- if show_collection_price and promo_collection != blank -%}
          <div class="promo__price promo-collection__price">
            <span class="visually__hidden">{{ 'products.price.regular_price' | t }}</span>
            <span class="product__sale-price">{{ promo_collection.products[0].price | money }}</span>
            {%- if promo_collection.products[0].compare_at_price > promo_collection.products[0].price -%}
              <span class="visually__hidden">{{ 'products.price.compare_price' | t }}</span>
              <span class="product__compare-price">{{ promo_collection.products[0].compare_at_price | money }}</span>
            {%- endif -%}
          </div>
        {%- endif -%}
        {% endcomment %}
        {%- if collection_text != blank -%}
          <div class="promo__description promo-collection__description rte{% if collectionBackgroundColor contains '#f' %} text__dark{% else %} text__light{% endif %}">
            {{ collection_text }}
          </div>
        {%- endif -%}
        {%- if show_collection_timer and promo_collection != blank -%}
          <div class="promo-timer__wrapper">
            <div class="timer__item">
              <span class="timer__days">10</span>
              <span>Days</span>
            </div>
            <div class="timer__item">
              <span class="timer__hours">12</span>
              <span>Hours</span>
            </div>
            <div class="timer__item">
              <span class="timer__minutes">20</span>
              <span>Min</span>
            </div>
            <div class="timer__item">
              <span class="timer__seconds">59</span>
              <span>Sec</span>
            </div>
          </div>
        {%- endif -%}
        {% if collection_button_label != blank %}
          <div class="promo-btn__container">
            <a
              href="{{ collection_button_link }}"
              class="btn btn__link promo-product__btn{% if collectionBackgroundColor contains '#f' %} btn__primary{% else %} btn-text__light{% endif %}"
              title="{{ collection_button_label }}">{{ collection_button_label }}</a>
          </div>
        {% endif %}
      </div>
      <div class="promo-collection__image">
        {%- if promo_collection != blank -%}
          {%- if collection_image_1 != blank -%}
            <div class="sale-image__container">
              <img
                class=""
                src="{{ collection_image_1 | img_url: default }}"
                srcset="
                  {{ collection_image_1 | img_url: 'medium' }} {% if ratio < 1 %}{{ 240 | times: ratio | round }}{% else %}240{% endif %}w,
                  {{ collection_image_1 | img_url: 'large' }} {% if ratio < 1 %}{{ 480 | times: ratio | round }}{% else %}480{% endif %}w,
                  {{ collection_image_1 | img_url: 'grande' }} {% if ratio < 1 %}{{ 600 | times: ratio | round }}{% else %}600{% endif %}w,
                  {{ collection_image_1 | img_url: '1024x1024' }} {% if ratio < 1 %}{{ 1024 | times: ratio | round }}{% else %}1024{% endif %}w,
                  {{ collection_image_1 | img_url: '2048x2048' }} {% if ratio < 1 %}{{ 2048 | times: ratio | round }}{% else %}2048{% endif %}w
                "
                width="{{ collection_image_1.width }}"
                height="{{ collection_image_1.height }}"
                loading="{{ lazyloading }}"
                sizes="{{ sizes }}"
                alt="{{ collection_image_1.alt }}">
            </div>
          {%- endif -%}
          {%- if collection_image_2 != blank -%}
            <div class="sale-image__container">
              <img
                class=""
                src="{{ collection_image_2 | img_url: default }}"
                srcset="
                  {{ collection_image_2 | img_url: 'medium' }} {% if ratio < 1 %}{{ 240 | times: ratio | round }}{% else %}240{% endif %}w,
                  {{ collection_image_2 | img_url: 'large' }} {% if ratio < 1 %}{{ 480 | times: ratio | round }}{% else %}480{% endif %}w,
                  {{ collection_image_2 | img_url: 'grande' }} {% if ratio < 1 %}{{ 600 | times: ratio | round }}{% else %}600{% endif %}w,
                  {{ collection_image_2 | img_url: '1024x1024' }} {% if ratio < 1 %}{{ 1024 | times: ratio | round }}{% else %}1024{% endif %}w,
                  {{ collection_image_2 | img_url: '2048x2048' }} {% if ratio < 1 %}{{ 2048 | times: ratio | round }}{% else %}2048{% endif %}w
                "
                width="{{ collection_image_2.width }}"
                height="{{ collection_image_1.height }}"
                loading="{{ lazyloading }}"
                sizes="{{ sizes }}"
                alt="{{ collection_image_2.alt }}">
            </div>
          {%- endif -%}
        {%- else -%}
          <div class="sale-image__container">
            {{ 'product-1' | placeholder_svg_tag: 'placeholder__image' }}
          </div>
          <div class="sale-image__container">
            {{ 'product-2' | placeholder_svg_tag: 'placeholder__image' }}
          </div>
        {%- endif -%}

      </div>
    </div>
  </div>
</div>